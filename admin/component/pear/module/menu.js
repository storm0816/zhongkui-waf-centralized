layui.define(["table","jquery","element"],function(e){"use strict";var t,i=layui.jquery,a=layui.element,n=function(e){this.option=e};function l(e){var t=e.parent().parent().prev();return"UL"===t.prop("tagName")?null:t}function o(e){0!=e.parseData&&e.parseData(e.data),e.data.length>0&&(0!=e.control?function(e){var t='<div style="width: '+e.controlWidth+'px;white-space: nowrap;overflow-x: scroll;overflow: hidden;" class="control"><ul class="layui-nav pear-nav-control pc layui-hide-xs" style="width: fit-content;">',a='<ul class="layui-nav pear-nav-control layui-hide-sm">',n='<div class="layui-side-scroll '+e.theme+'">',l='<dl class="layui-nav-child">';i.each(e.data,function(o,s){var d="",u="";o===e.defaultMenu?(u='<li pear-href="'+s.href+'" pear-title="'+s.title+'" pear-id="'+s.id+'" class="layui-this layui-nav-item"><a href="#">'+s.title+"</a></li>",d='<ul  pear-id="'+s.id+'" lay-filter="'+e.elem+'" class="layui-nav arrow layui-nav-tree pear-nav-tree">',a+='<li class="layui-nav-item"><a class="pe-title" href="javascript:;" >'+s.title+"</a>",l+='<dd  pear-href="'+s.href+'" pear-title="'+s.title+'" pear-id="'+s.id+'"><a href="javascript:void(0);">'+s.title+"</a></dd>"):(u='<li  pear-href="'+s.href+'" pear-title="'+s.title+'" pear-id="'+s.id+'" class="layui-nav-item"><a href="#">'+s.title+"</a></li>",d='<ul style="display:none" pear-id="'+s.id+'" lay-filter="'+e.elem+'" class="layui-nav arrow layui-nav-tree pear-nav-tree">',l+='<dd pear-href="'+s.href+'" pear-title="'+s.title+'" pear-id="'+s.id+'"><a href="javascript:void(0);">'+s.title+"</a></dd>"),0,i.each(s.children,function(e,t){var i='<li class="layui-nav-item" >',a="javascript:;",n="",l="site-demo-active";"_blank"==t.openType&&1==t.type&&(a=t.href,n="target='_blank'",l=""),0==t.type?i+='<a  href="'+a+'" '+n+' menu-type="'+t.type+'" menu-id="'+t.id+'" ><i class="'+t.icon+'"></i><span>'+t.title+"</span></a>":1==t.type&&(i+="<a "+n+' class="'+l+'" menu-type="'+t.type+'" menu-url="'+t.href+'" menu-id="'+t.id+'" menu-title="'+t.title+'" href="'+a+'"><i class="'+t.icon+'"></i><span>'+t.title+"</span></a>"),i+=r(t),d+=i+="</li>"}),n+=d+"</ul>",t+=u}),a+=l+="</li></dl></ul>",i("#"+e.control).html(t+"</div>"),i("#"+e.control).append(a),i("#"+e.elem).html(n),i("#"+e.control+" .pear-nav-control").on("click","[pear-id]",function(){i("#"+e.elem).find(".pear-nav-tree").css({display:"none"}),i("#"+e.elem).find(".pear-nav-tree[pear-id='"+i(this).attr("pear-id")+"']").css({display:"block"}),i("#"+e.control).find(".pe-title").html(i(this).attr("pear-title")),i("#"+e.control).find(""),e.change(i(this).attr("pear-id"),i(this).attr("pear-title"),i(this).attr("pear-href"))})}(e):function(e){var t='<div style="height:100%!important;" class="pear-side-scroll layui-side-scroll '+e.theme+'"><ul lay-filter="'+e.elem+'" class="layui-nav arrow   pear-menu layui-nav-tree pear-nav-tree">';i.each(e.data,function(i,a){var n='<li class="layui-nav-item" >';i==e.defaultOpen&&(n='<li class="layui-nav-item layui-nav-itemed" >');var l="javascript:;",o="",s="site-demo-active";"_blank"==a.openType&&1==a.type&&(l=a.href,o="target='_blank'",s=""),0==a.type?n+='<a  href="javascript:;" menu-type="'+a.type+'" menu-id="'+a.id+'" href="'+l+'" '+o+'><i class="'+a.icon+'"></i><span>'+a.title+"</span></a>":1==a.type&&(n+='<a class="'+s+'" menu-type="'+a.type+'" menu-url="'+a.href+'" menu-id="'+a.id+'" menu-title="'+a.title+'"  href="'+l+'"  '+o+'><i class="'+a.icon+'"></i><span>'+a.title+"</span></a>"),n+=r(a),t+=n+="</li>"}),t+="</ul></div>",i("#"+e.elem).html(t)}(e)),a.init(),function(e){i("body #"+e.elem).on("click","a[menu-type='0']",function(){if(!i("#"+e.elem).is(".pear-nav-mini")){i(this).parent();var t=i(this).next(".layui-nav-child"),a=48*t.children("dd").length;if(i(this).parent().is(".layui-nav-itemed")){if(e.accordion){var n=i(this).parent().siblings(".layui-nav-itemed").children(".layui-nav-child");n.animate({height:"0px"},240,function(){n.css({height:"auto"}),i(this).parent().removeClass("layui-nav-itemed"),i(this).find(".layui-nav-itemed").removeClass("layui-nav-itemed")})}t.height(0),t.animate({height:a+"px"},240,function(){t.css({height:"auto"})})}else i(this).parent().addClass("layui-nav-itemed"),t.animate({height:"0px"},240,function(){t.css({height:"auto"}),i(this).parent().removeClass("layui-nav-itemed")})}})}(e),e.done()}function r(e){if(1==e.type)return"";var t='<dl class="layui-nav-child">';return null!=e.children&&e.children.length>0?i.each(e.children,function(e,i){t+="<dd>";var a="javascript:;",n="",l="site-demo-active";"_blank"==i.openType&&1==i.type&&(a=i.href,n="target='_blank'",l=""),0==i.type?t+="<a "+n+'  href="'+a+'" menu-type="'+i.type+'" menu-id="'+i.id+'"><i class="'+i.icon+'"></i><span>'+i.title+"</span></a>":1==i.type&&(t+="<a "+n+' class="'+l+'" menu-type="'+i.type+'" menu-url="'+i.href+'" menu-id="'+i.id+'" menu-title="'+i.title+'" menu-icon="'+i.icon+'" href="'+a+'" ><i class="'+i.icon+'"></i><span>'+i.title+"</span></a>"),t+=r(i),t+="</dd>"}):t+='<dd style="background-color: transparent!important;"><a style="background-color: transparent!important;margin-left: 26px">目录为空</a></dd>',t+="</dl>"}function s(e,t){if(e){var a="#"+t.elem+".pear-nav-mini .layui-nav-item",n=a+" .layui-nav-child>dl";i(a+","+(a+" .layui-nav-child>dd")).mouseenter(function(){var e=i(this);e.siblings().find(".layui-nav-child").removeClass("layui-nav-hover").css({left:0,top:0}),e.children(".layui-nav-child").addClass("layui-nav-hover");var t=i(window).height(),a=e.offset().top,n=e.children(".layui-nav-child").height();n+a>t&&(a=t-n-10);var l=e.offset().left+60;e.hasClass("layui-nav-item")||(l=e.offset().left+e.width()),e.children(".layui-nav-child").offset({top:a,left:l})}),i(a+","+n).mouseleave(function(){i(this).closest(".layui-nav-item").find(".layui-nav-child").removeClass("layui-nav-hover").css({left:0,top:0})})}else i("#"+t.elem+" .layui-nav-item").off("mouseenter").unbind("mouseleave"),i("#"+t.elem+" dd").off("mouseenter").unbind("mouseleave")}function d(e){var t,a=i("#"+e.control),n=a.next();t=n.length?n.position().left-a.position().left:a.parent().innerWidth()-a.position().left,e.controlWidth&&t>=e.controlWidth&&(t=e.controlWidth),i("#"+e.control+" .control").css({width:t,transition:"width .15s"})}n.prototype.render=function(e){var t,a,l,r={elem:e.elem,async:e.async,parseData:e.parseData,url:e.url,method:e.method?e.method:"GET",defaultOpen:e.defaultOpen,defaultSelect:e.defaultSelect,control:e.control,controlWidth:e.controlWidth?e.controlWidth:"auto",defaultMenu:e.defaultMenu,accordion:e.accordion,height:e.height,theme:e.theme,data:e.data?e.data:[],change:e.change?e.change:function(){},done:e.done?e.done:function(){}},s=r.done;return r.done=function(){r.control&&function(e){i(window).on("resize",function(){d(e)}),i(document).ready(function(){d(e)})}(r),s()},r.async?"GET"===r.method?(t=r.url,a=i.Deferred(),l=-1!==t.indexOf("?")?"&":"?",i.get(t+l+"fresh="+Math.random(),function(e){a.resolve(e)}),a.promise()).then(function(e){r.data=e,o(r)}):function(e){var t=i.Deferred(),a=-1!==e.indexOf("?")?"&":"?";return i.post(e+a+"fresh="+Math.random(),function(e){t.resolve(e)},"json"),t.promise()}(r.url).then(function(e){r.data=e,o(r)}):window.setTimeout(function(){o(r)},500),i("#"+e.elem).height(r.height),setTimeout(function(){i("#"+e.control+" .control").on("mousewheel DOMMouseScroll",function(t){var a=t.originalEvent.wheelDelta&&(t.originalEvent.wheelDelta>0?1:-1)||t.originalEvent.detail&&(t.originalEvent.detail>0?-1:1);if(a>0)for(var n=1;n<20;n++)setTimeout(function(){i("#"+e.control+" .control ul").css("left").replace("px","")<0&&i("#"+e.control+" .control ul").css("left","+=2px")},10);else if(a<0&&Number(i("#"+e.control+" .control ul").css("left").replace("px",""))+(i("#"+e.control+" .control ul").width()-i("#"+e.control+" .control").width())>0)for(n=1;n<20;n++)setTimeout(function(){i("#"+e.control+" .control ul").css("left","-=2px")},10)})},1e3),new n(r)},n.prototype.click=function(e){var a=this;i("body").on("click","#"+a.option.elem+" .site-demo-active",function(){var n=i(this),o={menuId:n.attr("menu-id"),menuTitle:n.attr("menu-title"),menuPath:n.attr("menu-title"),menuIcon:n.attr("menu-icon"),menuUrl:n.attr("menu-url"),openType:n.attr("open-type")},r=l(n);if(null!=r&&""!=r.text()&&(o.menuPath=r.find("span").text()+" / "+o.menuPath),null!=r){var s=l(r);null!=s&&""!=s.text()&&(o.menuPath=s.find("span").text()+" / "+o.menuPath)}if(null!=s){var d=l(s);null!=d&&""!=d.text()&&(o.menuPath=d.find("span").text()+" / "+o.menuPath)}i("#"+a.option.elem).is(".pear-nav-mini")&&(a.option.accordion?t=i(this).parent().parent().parent().children("a"):t.push(i(this).parent().parent().parent().children("a"))),e(n,o)})},n.prototype.skin=function(e){var t=i(".pear-nav-tree[lay-filter='"+this.option.elem+"']").parent();t.removeClass("dark-theme"),t.removeClass("light-theme"),t.addClass(e)},n.prototype.selectItem=function(e){if(0!=this.option.control){i("#"+this.option.elem+" a[menu-id='"+e+"']").parents(".layui-side-scroll ").find("ul").css({display:"none"}),i("#"+this.option.elem+" a[menu-id='"+e+"']").parents(".layui-side-scroll ").find(".layui-this").removeClass("layui-this"),i("#"+this.option.elem+" a[menu-id='"+e+"']").parents("ul").css({display:"block"});var t=i("#"+this.option.elem+" a[menu-id='"+e+"']").parents("ul").attr("pear-id");null!=t&&(i("#"+this.option.control).find(".layui-this").removeClass("layui-this"),i("#"+this.option.control).find("[pear-id='"+t+"']").addClass("layui-this"))}if(i("#"+this.option.elem+" a[menu-id='"+e+"']").parents(".pear-nav-tree").find(".layui-this").removeClass("layui-this"),!i("#"+this.option.elem).is(".pear-nav-mini")){var a=null,n=0;if(i(i("#"+this.option.elem+" a[menu-id='"+e+"']").parents(".layui-nav-child").get().reverse()).each(function(){i(this).parent().is(".layui-nav-itemed")||(0==n?a=i(this):(i(this).parent().addClass("layui-nav-itemed"),i(this).css({height:"auto"})),n+=48*i(this).children("dd").length)}),this.option.accordion&&n>0){var l=a.parent().siblings(".layui-nav-itemed").children(".layui-nav-child");l.animate({height:"0px"},240,function(){l.css({height:"auto"}),i(this).parent().removeClass("layui-nav-itemed"),i(this).find(".layui-nav-itemed").removeClass("layui-nav-itemed")})}n>0&&(a.parent().addClass("layui-nav-itemed"),a.height(0),a.animate({height:n+"px"},240,function(){i(this).css({height:"auto"})}))}i("#"+this.option.elem+" a[menu-id='"+e+"']").parent().addClass("layui-this")},n.prototype.collapse=function(e){var a=this.option.elem,n=this.option;if(i("#"+this.option.elem).is(".pear-nav-mini")){i.each(t,function(e,t){i("#"+a+" a[menu-id='"+i(this).attr("menu-id")+"']").parent().addClass("layui-nav-itemed")}),i("#"+this.option.elem).removeClass("pear-nav-mini"),i("#"+this.option.elem).animate({width:"220px"},180),s(!1,n);var l=this;i("#"+this.option.elem).promise().done(function(){l.option.control&&d(l.option)})}else{t=i("#"+this.option.elem).find(".layui-nav-itemed>a"),i("#"+this.option.elem).find(".layui-nav-itemed").removeClass("layui-nav-itemed"),i("#"+this.option.elem).addClass("pear-nav-mini"),i("#"+this.option.elem).animate({width:"60px"},400);l=this;i("#"+this.option.elem).promise().done(function(){s(!0,n),l.option.control&&d(l.option)})}},e("menu",new n)});