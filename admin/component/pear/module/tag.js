layui.define("jquery",function(t){"use strict";var e=layui.$,n="layui-btn layui-btn-primary layui-btn-sm";(i=function(){this.config={skin:n,tagText:"+ New Tag"},this.configs={}}).prototype.set=function(t){return e.extend(!0,this.config,t),i.render(),this},i.prototype.on=function(t,e){return layui.onevent.call(this,"tag",t,e)},i.prototype.add=function(t,n){var i=e(".tag[lay-filter="+t+"]");return a.add(null,i,n),a.tagAuto(t),this},i.prototype.delete=function(t,n){var i=e(".tag[lay-filter="+t+"]").find('>.tag-item[lay-id="'+n+'"]');return a.delete(null,i),this};var a={tagClick:function(t,n,a,i){i=i||{};var l=a||e(this),o=(n=n||l.index(l),l.parents(".tag").eq(0)),r=o.attr("lay-filter");layui.event.call(this,"tag","click("+r+")",{elem:o,index:n})},add:function(t,e,n){var a=e.attr("lay-filter"),i=e.children(".button-new-tag"),l=i.index(),o='<button lay-id="'+(n.id||"")+'"'+(n.attr?' lay-attr="'+n.attr+'"':"")+' type="button" class="tag-item">'+(n.text||"unnaming")+"</button>";!1!==layui.event.call(this,"tag","add("+a+")",{elem:e,index:l,othis:o})&&(i[0]?i.before(o):e.append(o))},input:function(t,n){var l=n||e(this),o=l.parents(".tag").eq(0),r=o.attr("lay-filter"),u=i.configs[r]=e.extend({},i.config,i.configs[r]||{},u),s=e('<div class="input-new-tag"><input type="text" autocomplete="off" class="layui-input"></div>');s.addClass(u.skin),l.after(s).remove(),s.children(".layui-input").on("blur",function(){if(this.value){var t={text:this.value};a.add(null,o,t)}s.remove(),a.tagAuto(r)}).focus()},delete:function(t,n){var a=n||e(this).parent(),i=a.index(),l=a.parents(".tag").eq(0),o=l.attr("lay-filter");!1!==layui.event.call(this,"tag","delete("+o+")",{elem:l,index:i})&&a.remove()},tagAuto:function(t){var l=(t=t||"")&&i.configs[t]||i.config;e(".tag"+(t?'[lay-filter="'+t+'"]':"")).each(function(){var t=e(this),i=t.children(".tag-item"),o=t.children(".button-new-tag");i.removeClass(n).addClass(l.skin),t.attr("lay-allowClose")&&i.length&&i.each(function(){var t=e(this);if(!t.find(".tag-close")[0]){var n=e('<i class="layui-icon layui-unselect tag-close">&#x1006;</i>');n.on("click",a.delete),t.append(n)}}),t.attr("lay-newTag")&&0===o.length&&((o=e('<button type="button" class="button-new-tag"></button>')).on("click",a.input),t.append(o)),o.html(l.tagText),o.removeClass(n).addClass(l.skin)})}};i.prototype.init=function(t,n){return t&&(i.configs[t]=e.extend({},i.config,i.configs[t]||{},n)),a.tagAuto.call(this,t)},i.prototype.render=i.prototype.init;var i=new i,l=e(document);i.render(),l.on("click",".tag-item",a.tagClick),t("tag",i)});